---
id: 配置选项
title: 配置选项
sidebar_position: 1
---

本文档列出 Schema Element Editor 的所有配置选项及其说明。

## 访问配置页面

1. 右键点击工具栏的 Schema Element Editor 图标
2. 选择「选项」或「Options」
3. 或在 `chrome://extensions/` 中找到 Schema Element Editor，点击「详情」→「扩展程序选项」

## 集成配置

### 元素标记配置

| 配置项   | 说明                   | 默认值 | 有效范围                             |
| -------- | ---------------------- | ------ | ------------------------------------ |
| 属性名称 | 标记可编辑元素的属性名 | `id`   | 小写字母开头，可含字母、数字、连字符 |

> 实际使用的 HTML 属性为 `data-{属性名称}`，如默认配置对应 `data-id`

### postMessage 配置

| 配置项        | 说明               | 默认值                          | 有效范围 |
| ------------- | ------------------ | ------------------------------- | -------- |
| 请求超时时间  | 等待响应的最长时间 | 5 秒                            | 1-30 秒  |
| 插件端 source | 插件发送消息的标识 | `schema-element-editor-content` | 字母开头 |
| 宿主端 source | 宿主响应消息的标识 | `schema-element-editor-host`    | 字母开头 |

#### 消息类型配置

| 配置项      | 说明                     | 默认值            |
| ----------- | ------------------------ | ----------------- |
| 获取 Schema | GET_SCHEMA 消息类型      | `GET_SCHEMA`      |
| 更新 Schema | UPDATE_SCHEMA 消息类型   | `UPDATE_SCHEMA`   |
| 检查预览    | CHECK_PREVIEW 消息类型   | `CHECK_PREVIEW`   |
| 渲染预览    | RENDER_PREVIEW 消息类型  | `RENDER_PREVIEW`  |
| 清理预览    | CLEANUP_PREVIEW 消息类型 | `CLEANUP_PREVIEW` |
| 开始录制    | START_RECORDING 消息类型 | `START_RECORDING` |
| 停止录制    | STOP_RECORDING 消息类型  | `STOP_RECORDING`  |
| 推送数据    | SCHEMA_PUSH 消息类型     | `SCHEMA_PUSH`     |

---

## 元素检测与高亮

### 基础模式

| 配置项           | 说明                     | 默认值    | 有效范围 |
| ---------------- | ------------------------ | --------- | -------- |
| 节流间隔         | 鼠标移动检测频率         | 16ms      | ≥8ms     |
| 限制向上搜索层级 | 是否限制查找父元素的层数 | 关闭      | 开/关    |
| 向上搜索深度     | 查找父元素的最大层数     | 5         | 1-100    |
| 高亮框颜色       | 悬停时高亮框的颜色       | `#1677FF` | 任意颜色 |

### 搜索模式（批量高亮）

| 配置项       | 说明                 | 默认值 | 有效范围       |
| ------------ | -------------------- | ------ | -------------- |
| 启用功能     | 是否启用批量高亮     | 开启   | 开/关          |
| 快捷键       | 触发按键（配合 Alt） | `a`    | 单个字母或数字 |
| 最大高亮数量 | 最多同时高亮的元素数 | 500    | 100-1000       |

### 录制模式

| 配置项             | 说明                 | 默认值    | 有效范围                 |
| ------------------ | -------------------- | --------- | ------------------------ |
| 启用功能           | 是否启用录制模式     | 开启      | 开/关                    |
| 快捷键             | 切换录制模式的按键   | `r`       | 单个字母或数字           |
| 高亮颜色           | 录制模式的高亮框颜色 | `#FF4D4F` | 任意颜色                 |
| 数据获取模式       | 获取数据的方式       | 轮询      | `polling`、`eventDriven` |
| 轮询间隔           | 轮询模式下的间隔     | 100ms     | 50-1000ms                |
| 数据无变化自动停止 | 超时无变化时自动停止 | 禁用      | 3-300秒 或 留空          |

> 事件驱动模式性能更好，推荐使用

### iframe 支持

| 配置项               | 说明                   | 默认值      | 选项                 |
| -------------------- | ---------------------- | ----------- | -------------------- |
| 启用 iframe 元素检测 | 是否检测 iframe 内元素 | 关闭        | 开/关                |
| Schema 数据来源      | iframe 元素的数据来源  | iframe 内部 | `iframe`、`topFrame` |

---

## 编辑器配置

### 编辑器功能

| 配置项         | 说明                                 | 默认值 |
| -------------- | ------------------------------------ | ------ |
| 字符串自动解析 | 自动将字符串解析为 Markdown Elements | 开启   |
| AST 类型提示   | 编辑 Elements[] 时提供智能补全       | 开启   |
| 启用单独编辑   | 在编辑器中对选中内容快速打开单独编辑弹窗 | 开启   |

#### 单独编辑触发方式

启用单独编辑后，可选择触发方式：

| 配置项   | 说明                   | 默认值       | 选项                       |
| -------- | ---------------------- | ------------ | -------------------------- |
| 触发方式 | 单独编辑弹窗的触发方式 | 选中自动出现 | `选中自动出现`、`右键出现` |

> 详细使用说明请参考 [Schema 编辑器 - 快速单独编辑](../guides/Schema编辑器.md#快速单独编辑)

### 外观设置

| 配置项 | 说明             | 默认值    |
| ------ | ---------------- | --------- |
| 主题色 | 插件界面的主题色 | `#1677FF` |

---

## 功能开关

### 功能模块

| 配置项   | 说明                         | 默认值 |
| -------- | ---------------------------- | ------ |
| 草稿功能 | 保存/加载/删除草稿、自动保存 | 开启   |
| 收藏功能 | 添加/浏览/应用收藏           | 开启   |
| 历史记录 | 编辑历史和版本切换           | 开启   |

### 工具栏按钮

| 配置项             | 说明               | 默认值 |
| ------------------ | ------------------ | ------ |
| AST/RawString 切换 | 内容类型切换按钮 | 开启 |
| 转义/反转义        | 字符串转义按钮   | 开启 |
| 解析               | Deserialize 按钮 | 关闭 |
| 压缩               | Compact 按钮     | 关闭 |
| 格式化             | Format 按钮      | 开启 |
| 预览               | Preview 按钮       | 开启   |
| 导入导出           | Import/Export 按钮 | 开启   |

> 点击「一键精简」可关闭所有工具栏按钮

---

## 实时预览

### 预览行为

| 配置项         | 说明                         | 默认值 | 有效范围   |
| -------------- | ---------------------------- | ------ | ---------- |
| 启用内置预览器 | 宿主未提供预览时使用内置预览 | 开启   | 开/关      |
| 自动更新预览   | 内容变化时自动更新预览       | 关闭   | 开/关      |
| 更新防抖       | 编辑后多久更新预览           | 500ms  | 100-2000ms |
| 预览区域宽度   | 预览区域占比                 | 40%    | 20-80%     |

### 层级配置

| 配置项           | 说明             | 默认值     | 有效范围        |
| ---------------- | ---------------- | ---------- | --------------- |
| 默认 z-index     | 非预览模式的层级 | 2147483646 | 1000-2147483647 |
| 预览模式 z-index | 预览容器的层级   | 999        | 1-2147483647    |

---

## 数据管理

### 草稿配置

| 配置项       | 说明                   | 默认值 |
| ------------ | ---------------------- | ------ |
| 草稿自动保存 | 内容变化时自动保存草稿 | 关闭   |

### 收藏配置

| 配置项       | 说明               | 默认值 | 有效范围 |
| ------------ | ------------------ | ------ | -------- |
| 最大收藏数量 | 收藏列表的容量上限 | 50     | 10-200   |
| 最大固定收藏数量 | 可固定的收藏数量上限 | 10     | 1-50     |

:::tip 收藏上限管理
- 达到收藏数量上限时，添加收藏按钮会自动禁用
- 鼠标悬停按钮会显示提示信息
- 不会自动删除已有收藏，需手动删除后才能添加新收藏
- 固定收藏不计入删除优先级，避免重要收藏被意外删除
:::

### 配置预设 <span className="badge badge--success">v2.4.0+</span>

| 配置项         | 说明                   | 默认值 | 有效范围 |
| -------------- | ---------------------- | ------ | -------- |
| 预设配置上限   | 可保存的配置预设数量   | 5      | 1-20     |

:::tip 预设上限管理
- 达到预设数量上限时，保存预设按钮会自动禁用
- 鼠标悬停按钮会显示提示信息
- 预设列表按创建时间降序排列（最新的在前）
- 不会自动删除已有预设，需手动删除后才能添加新预设
:::

> 配置预设功能可以保存完整的插件配置方案，实现快速切换。详见 [预设配置指南](../guides/预设配置.md)

### 历史记录配置

| 配置项       | 说明               | 默认值 | 有效范围 |
| ------------ | ------------------ | ------ | -------- |
| 历史记录上限 | 普通版本的最大数量 | 50 条  | 10-200   |

> 特殊版本（保存、草稿、收藏）不计入上限

### 导出配置

| 配置项             | 说明                 | 默认值 |
| ------------------ | -------------------- | ------ |
| 导出时自定义文件名 | 导出时弹窗输入文件名 | 关闭   |

---

## 快捷键配置

### 编辑器快捷键

| 配置项        | 说明             | 默认值            |
| ------------- | ---------------- | ----------------- |
| 保存          | 保存当前编辑内容 | `Alt + S`         |
| 格式化        | 格式化 JSON 内容 | `Alt + F`         |
| 打开/更新预览 | 打开或刷新预览   | `Alt + P`         |
| 关闭预览      | 关闭预览面板     | `Shift + Alt + P` |

**快捷键要求**：

- 必须包含 `Ctrl/Cmd` 或 `Alt` 修饰键
- 避免使用浏览器保留快捷键

---

## 开发调试

### 日志设置

| 配置项       | 说明                 | 默认值 |
| ------------ | -------------------- | ------ |
| 启用调试日志 | 在控制台输出调试信息 | 关闭   |

---

## 默认值速查表

### 元素检测

| 配置项           | 默认值    |
| ---------------- | --------- |
| 属性名称         | `id`      |
| 节流间隔         | 16ms      |
| 高亮框颜色       | `#1677FF` |
| 批量高亮快捷键   | `Alt + A` |
| 最大高亮数量     | 500       |
| 录制模式快捷键   | `Alt + R` |
| 录制模式高亮颜色 | `#FF4D4F` |
| 轮询间隔         | 100ms     |

### 通信配置

| 配置项        | 默认值                          |
| ------------- | ------------------------------- |
| 通信模式      | postMessage                     |
| 请求超时      | 5 秒                            |
| 插件端 source | `schema-element-editor-content` |
| 宿主端 source | `schema-element-editor-host`    |

### 数据管理

| 配置项       | 默认值 |
| ------------ | ------ |
| 最大收藏数量 | 50     |
| 预设配置上限 | 5      |
| 历史记录上限 | 50     |
| 草稿自动保存 | 关闭   |

### 预览配置

| 配置项         | 默认值 |
| -------------- | ------ |
| 启用内置预览器 | 开启   |
| 自动更新预览   | 关闭   |
| 更新防抖       | 500ms  |
| 预览区域宽度   | 40%    |

---

## 重置配置

### 重置单个区块

每个配置区块右上角有「重置」按钮，点击可将该区块恢复为默认值。

### 重置所有配置

暂不支持一键重置所有配置，需要逐个区块重置。

---

## 配置存储

配置数据存储在 Chrome 扩展存储中：

| 数据类型 | 存储位置               | 生命周期         |
| -------- | ---------------------- | ---------------- |
| 配置选项 | `chrome.storage.local` | 持久保存         |
| 收藏数据 | `chrome.storage.local` | 持久保存         |
| 草稿数据 | `chrome.storage.local` | 持久保存         |
| 编辑历史 | `sessionStorage`       | 标签页关闭后清除 |

---

## 配置迁移

### 从旧版本迁移

Schema Element Editor 会自动迁移旧版本的配置。如果遇到问题，可以尝试重置配置。

### 导出/导入配置

支持导出和导入完整配置：

1. **导出配置**：在设置页面点击"导出配置"按钮，将当前所有配置导出为JSON文件
2. **导入配置**：在设置页面点击"导入配置"按钮，选择之前导出的JSON文件
3. **配置预设**：使用配置预设功能可以保存多套配置方案，详见 [预设配置指南](../guides/预设配置.md)
