# 配置预设

配置预设功能允许您保存和管理完整的插件配置方案，实现不同工作环境配置的快速切换。

:::info 版本要求
此功能在 v2.4.0+ 版本中可用
:::

## 功能概述

配置预设系统可以保存插件的所有配置项，包括：
- 编辑器设置（宽度、主题等）
- 工具栏按钮配置
- 搜索和高亮配置
- 收藏和草稿管理配置
- API通信配置
- 所有其他插件设置

## 使用场景

### 场景1：不同项目的配置切换

假设您在多个项目中使用插件，每个项目有不同的配置需求：
- **项目A**：需要较大的编辑器宽度，启用自动保存
- **项目B**：需要紧凑的编辑器，关闭自动保存

使用配置预设，您可以为每个项目保存一套配置，快速切换。

### 场景2：不同工作模式

您可能在不同场景下需要不同的配置：
- **开发模式**：启用调试日志，显示所有工具栏按钮
- **演示模式**：隐藏部分按钮，使用简洁主题

## 保存配置预设

### 在设置页面保存

1. 打开插件设置页面（点击工具栏图标 → 设置图标）
2. 调整各项配置到您期望的状态
3. 点击右上角的"保存预设"按钮
4. 输入预设名称（如"项目A配置"）
5. 确认保存

### 在编辑器中保存

1. 打开Schema编辑器
2. 点击工具栏中的预设下拉菜单
3. 选择"保存当前配置为预设"
4. 输入预设名称并确认

## 应用配置预设

### 在设置页面应用

1. 打开插件设置页面
2. 点击右上角的"管理预设"按钮
3. 在预设列表中选择要应用的预设
4. 点击"应用"按钮
5. 配置会立即生效，无需刷新页面

### 在编辑器中应用

1. 打开Schema编辑器
2. 点击工具栏中的预设下拉菜单
3. 选择要应用的预设
4. 配置会立即应用到当前页面

:::tip 无刷新应用
从 v2.4.0 开始，应用预设配置后会自动同步到所有已打开的编辑器窗口，无需手动刷新页面。
:::

## 管理配置预设

### 查看预设列表

在设置页面点击"管理预设"按钮，可以查看所有已保存的预设配置。

列表显示内容：
- 预设名称
- 保存时间

:::tip 按创建时间排序
预设列表按创建时间降序排列，最新保存的预设显示在最前面。
:::

### 编辑预设

1. 在预设列表中找到要编辑的预设
2. 点击"编辑"按钮
3. 修改预设名称或重新保存配置
4. 确认保存

### 删除预设

1. 在预设列表中找到要删除的预设
2. 点击"删除"按钮
3. 确认删除

:::warning 删除不可恢复
删除预设配置后无法恢复，请谨慎操作。
:::

## 配置项说明

### 预设配置上限

- **默认值**：5个
- **可配置范围**：1-20个
- **配置位置**：设置页面 → 数据管理 → 预设配置上限

当预设数量达到上限时，保存按钮会被禁用，并提示您删除旧预设后再添加新预设。

:::info 用户友好的上限管理
- 达到上限时，保存预设按钮会自动禁用
- 鼠标悬停在按钮上会显示提示信息
- 不会自动删除已有的预设，避免意外丢失重要配置
- 您可以手动删除不需要的预设后，继续添加新预设
:::

## 最佳实践

### 1. 合理命名

使用清晰的预设名称，便于识别：
- ✅ 推荐：`项目A-开发环境`、`演示模式-简洁版`
- ❌ 不推荐：`配置1`、`test`

### 2. 定期维护

定期检查预设列表，删除不再使用的预设，保持列表整洁。

### 3. 重要配置备份

对于重要的配置预设，建议：
1. 使用导出功能导出配置到JSON文件
2. 保存到安全的位置作为备份

### 4. 控制预设数量

建议将预设配置上限设置为5-10个，保持合理的数量：
- 过多的预设会增加选择成本
- 预设数量达到上限后需要手动删除旧预设才能添加新预设
- 定期清理不再使用的预设，保持列表整洁

## 常见问题

### Q: 预设配置包含哪些内容？

A: 预设配置包含插件的所有设置项，包括但不限于：
- 编辑器配置（宽度、主题、字体等）
- 工具栏按钮显示/隐藏
- 搜索和高亮配置
- 收藏数量上限
- 草稿保存配置
- API通信配置
- 所有其他可配置项

**不包含**：已保存的收藏数据、草稿数据、历史记录等用户数据。

### Q: 应用预设后会覆盖当前配置吗？

A: 是的，应用预设会完全覆盖当前的所有配置项。如果您想保留当前配置，请在应用预设前先保存为新的预设。

### Q: 预设配置可以导出和分享吗？

A: 当前版本预设配置存储在浏览器本地。如果需要分享配置：
1. 应用要分享的预设
2. 使用设置页面的"导出配置"功能导出为JSON文件
3. 分享JSON文件给他人
4. 对方导入JSON文件后，可以保存为自己的预设

### Q: 预设配置是否跨浏览器同步？

A: 预设配置存储在浏览器的 `chrome.storage.local` 中，不会跨浏览器或跨设备同步。如需在多个浏览器使用相同配置，请使用导出/导入功能。

## 技术说明

### 存储机制

预设配置使用 Chrome 扩展的 `chrome.storage.local` API 存储，每个预设包含：
- 唯一标识符（ID）
- 预设名称
- 完整的配置对象
- 创建时间戳

### 排序规则

预设排序机制：
- 预设列表按创建时间降序排列（最新的在前）
- 不根据使用频率动态调整顺序
- 列表顺序固定，便于用户快速找到特定预设

